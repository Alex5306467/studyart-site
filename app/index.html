<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Studyart ‚Äî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
  <meta name="description" content="Studyart: –∫—É—Ä—Å—ã, —Å–µ—Ç—ã —Å–ª–æ–≤, –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è." />
  <style>
    :root{
      --bg:#f6fbf7; --bg-2:#eef8f1; --card:#fff; --ink:#0f172a; --muted:#5b6777; --line:rgba(15,23,42,.1);
      --brand:#9fe6cc; --brand-2:#c9f0e0; --ok:#43b98e; --warn:#efb661; --shadow:0 10px 26px rgba(15,23,42,.08); --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial;background:radial-gradient(1200px 600px at 50% -200px,var(--bg-2),transparent 60%),var(--bg);color:var(--ink)}
    .wrap{max-width:1024px;margin:0 auto;padding:20px 14px 60px}
    header{position:sticky;top:0;z-index:5;backdrop-filter:blur(8px);background:linear-gradient(180deg,rgba(246,251,247,.85),rgba(246,251,247,.65));border-bottom:1px solid var(--line)}
    .head{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 14px}
    .brand{display:flex;align-items:center;gap:10px;cursor:pointer}
    .logo{width:36px;height:36px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--brand),var(--brand-2));border:1px solid var(--line);box-shadow:var(--shadow);font-weight:800;color:#0f172a}
    nav{display:flex;gap:8px;flex-wrap:wrap}
    .link{background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px 12px;cursor:pointer;box-shadow:var(--shadow);font-weight:600}
    .link:hover{background:#f8fffb}

    main{margin-top:12px}
    .section{margin:22px 0}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;display:flex;gap:14px;align-items:center}
    @media (min-width:640px){.card{grid-column:span 6}}@media (min-width:960px){.card{grid-column:span 4}}
    .title{font-weight:800;margin:2px 0 6px}
    .meta{font-size:13px;color:var(--muted)}
    .btn{appearance:none;border:none;cursor:pointer;font-weight:700;border-radius:14px;padding:10px 14px;background:var(--ok);color:#fff;box-shadow:0 8px 20px rgba(67,185,142,.25)}
    .btn.ghost{background:#fff;color:#0f172a;border:1px solid var(--line);box-shadow:none}
    .btn.warn{background:var(--warn);color:#1f2a2e}
    .toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
    .hidden{display:none!important}

    /* forms */
    .form{display:grid;gap:14px}
    .row{display:grid;gap:12px}
    @media(min-width:720px){.row{grid-template-columns:1fr 1fr}}
    .field{display:grid;gap:6px}
    .field label{font-size:12px;color:var(--muted)}
    .input, .select-input, textarea{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#fff;font:inherit}
    .sugg{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#f8fafc;cursor:pointer}
    .lang-controls{display:flex;gap:8px;flex-wrap:wrap}
    .picker{display:flex;align-items:center;gap:8px;border:1px solid var(--line);background:#fff;border-radius:12px;padding:8px 10px;box-shadow:var(--shadow)}
    .picker label{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap head">
      <div class="brand" id="homeBtn" role="button" tabindex="0" aria-label="–î–æ–º–æ–π"><div class="logo">SA</div><div style="font-weight:800">Studyart</div></div>
      <nav>
        <button class="link" data-nav="courses">–ö—É—Ä—Å—ã</button>
        <button class="link" data-nav="sets">–°–µ—Ç—ã</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- DASHBOARD -->
    <section id="dashboard" class="section">
      <div class="toolbar"><h2 style="margin:0">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2></div>
      <!-- –Ø–∑—ã–∫–∏: UI –∏ –∏–∑—É—á–∞–µ–º—ã–π -->
      <div class="lang-controls" style="margin:0 0 12px">
        <div class="picker"><label for="uiLang">–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</label>
          <select id="uiLang" class="select-input">
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="zh">‰∏≠Êñá</option>
          </select>
        </div>
        <div class="picker"><label for="learnLang">–ò–∑—É—á–∞—é</label>
          <select id="learnLang" class="select-input">
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="zh">‰∏≠Êñá</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
          </select>
        </div>
      </div>
      <div class="grid" id="dashCourses"></div>
      <div class="grid" id="dashSets" style="margin-top:8px"></div>
    </section>

    <!-- COURSES PAGE -->
    <section id="coursesPage" class="section hidden" aria-labelledby="coursesTitle">
      <div class="toolbar">
        <h2 id="coursesTitle" style="margin:0">–ú–æ–∏ –∫—É—Ä—Å—ã</h2>
        <button class="link" data-back>‚Üê –ù–∞–∑–∞–¥</button>
      </div>
      <div class="grid" id="coursesGrid"></div>
    </section>

    <!-- SETS PAGE -->
    <section id="setsPage" class="section hidden" aria-labelledby="setsTitle">
      <div class="toolbar">
        <h2 id="setsTitle" style="margin:0">–ú–æ–∏ —Å–µ—Ç—ã</h2>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" data-open="create-manual">‚úçÔ∏è –°–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é</button>
          <button class="btn warn" data-open="create-ai">ü§ñ –°–æ–∑–¥–∞—Ç—å —Å –ò–ò –∏–∑ —Ç–µ–∫—Å—Ç–∞</button>
          <button class="link" data-back>‚Üê –ù–∞–∑–∞–¥</button>
        </div>
      </div>
      <div class="grid" id="setsGrid"></div>
    </section>

    <!-- CREATE SET (MANUAL) -->
    <section id="createSetPage" class="section hidden" aria-labelledby="createSetTitle">
      <div class="toolbar">
        <h2 id="createSetTitle" style="margin:0">–ù–æ–≤—ã–π —Å–µ—Ç (–≤—Ä—É—á–Ω—É—é)</h2>
        <button class="link" data-back>‚Üê –ù–∞–∑–∞–¥</button>
      </div>
      <div class="card" style="align-items:flex-start">
        <div class="grow" style="width:100%">
          <form class="form" id="createSetForm">
            <div class="field">
              <label for="setName">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ç–∞</label>
              <input class="input" id="setName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è A1" required />
            </div>

            <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
            <div class="field">
              <label>–ö–∞—Ä—Ç–æ—á–∫–∏</label>
              <div id="cardRows" class="row"></div>
              <div style="display:flex;gap:8px;margin-top:8px">
                <button type="button" class="btn" id="btnAddRow">+ –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>
              </div>
            </div>

            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button type="submit" class="btn" id="btnSaveSet">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Ç</button>
              <button type="button" class="btn ghost" id="btnCancelCreate">–û—Ç–º–µ–Ω–∞</button>
            </div>
          </form>
        </div>
      </div>
      <div class="section" aria-label="preview">
        <h3 class="title" style="margin:0 0 8px">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–µ–∫</h3>
        <div class="grid" id="newCardsPreview"></div>
      </div>
    </section>

    <!-- CREATE SET (AI PLACEHOLDER) -->
    <section id="aiSetPage" class="section hidden" aria-labelledby="aiTitle">
      <div class="toolbar">
        <h2 id="aiTitle" style="margin:0">–ù–æ–≤—ã–π —Å–µ—Ç —Å –ò–ò (–∏–∑ —Ç–µ–∫—Å—Ç–∞)</h2>
        <button class="link" data-back>‚Üê –ù–∞–∑–∞–¥</button>
      </div>
      <div class="card" style="align-items:flex-start">
        <div class="grow" style="width:100%">
          <label for="aiText" style="font-size:12px;color:var(--muted)">–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç</label>
          <textarea id="aiText" rows="6" class="input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç; –ø–æ–∑–∂–µ –ò–ò –∏–∑–≤–ª–µ—á—ë—Ç —Å–ª–æ–≤–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã"></textarea>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
            <button class="btn warn" id="btnGenerateAI">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å (–¥–µ–º–æ)</button>
            <button class="btn ghost" id="btnAIToManual">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // ===== Safe helpers
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const show = (id) => { $$('main section').forEach(s=>s.classList.add('hidden')); $(id)?.classList.remove('hidden'); window.scrollTo({top:0,behavior:'smooth'}); };
    const el = (tag, cls='') => { const n=document.createElement(tag); if(cls) n.className=cls; return n; };

    // ===== App state (languages)
    const state = {
      uiLang: localStorage.getItem('uiLang') || 'ru',
      learnLang: localStorage.getItem('learnLang') || 'es',
    };

    // ===== Mock data
    const courses = [
      { id:'c1', title:'Spanish A1 ‚Äî Basics', lang:'es', lessons:24, done:12, tag:'A1' },
      { id:'c2', title:'Everyday English ‚Äî Travel', lang:'en', lessons:18, done:7, tag:'Topic' },
      { id:'c3', title:'Deutsch ‚Äî Starter Pack', lang:'de', lessons:20, done:2, tag:'A1' }
    ];
    const sets = [
      { id:'s1', title:'Restaurant phrases', lang:'es', total:80, learned:42, due:10 },
      { id:'s2', title:'Airport essentials', lang:'en', total:60, learned:23, due:5 },
      { id:'s3', title:'Daily verbs', lang:'es', total:100, learned:70, due:12 }
    ];

    // ===== Render helpers
    const progress = (d,t)=>Math.max(0,Math.min(100,Math.round((d/t)*100)));
    const makeCourseCard = (c)=>{
      const p = progress(c.done||0,c.lessons||1);
      const card = el('div','card');
      card.innerHTML = `<div class="title">${c.title}</div>
        <div class="meta">–£—Ä–æ–∫–æ–≤: ${c.done}/${c.lessons}</div>
        <div style="margin-left:auto"><button class="btn" data-course="${c.id}">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button></div>`;
      return card;
    };
    const makeSetCard = (s)=>{
      const p = progress(s.learned||0,s.total||1);
      const card = el('div','card');
      card.innerHTML = `<div class="title">${s.title}</div>
        <div class="meta">${s.lang?.toUpperCase()} ¬∑ –ò–∑—É—á–µ–Ω–æ: ${s.learned} ¬∑ –ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é: <b style="color:var(--warn)">${s.due}</b></div>
        <div style="margin-left:auto;display:flex;gap:8px"><button class="btn" data-review-set="${s.id}">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button><button class="btn ghost" data-open-set="${s.id}">–û—Ç–∫—Ä—ã—Ç—å</button></div>`;
      return card;
    };

    // ===== Render pages
    function renderDashboard(){
      // init selects
      const uiSel = $('#uiLang'); const learnSel = $('#learnLang');
      if(uiSel){ uiSel.value = state.uiLang; uiSel.onchange = (e)=>{ state.uiLang = e.target.value; localStorage.setItem('uiLang', state.uiLang); /* –∑–¥–µ—Å—å –æ–±–Ω–æ–≤–∏–º i18n –ø–æ–∑–∂–µ */ }; }
      if(learnSel){ learnSel.value = state.learnLang; learnSel.onchange = (e)=>{ state.learnLang = e.target.value; localStorage.setItem('learnLang', state.learnLang); renderDashboard(); }; }

      const cgrid = $('#dashCourses'); const sgrid = $('#dashSets'); if(!cgrid||!sgrid) return;
      cgrid.innerHTML=''; sgrid.innerHTML='';
      const courseList = courses.filter(c=>c.lang===state.learnLang).concat(courses.filter(c=>c.lang!==state.learnLang)).slice(0,3);
      const setList = sets.filter(s=>s.lang===state.learnLang).concat(sets.filter(s=>s.lang!==state.learnLang)).slice(0,3);
      cgrid.append(...courseList.map(makeCourseCard));
      sgrid.append(...setList.map(makeSetCard));
    }
    function renderCourses(){ const grid=$('#coursesGrid'); if(!grid) return; grid.innerHTML=''; const list=courses.filter(c=>c.lang===state.learnLang); if(!list.length){ grid.innerHTML = '<div class="card"><div class="title">–ù–µ—Ç –∫—É—Ä—Å–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞</div><div class="meta">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ –∏–∑—É—á–µ–Ω–∏—è</div></div>'; return;} grid.append(...list.map(makeCourseCard)); }
    function renderSets(){ const grid=$('#setsGrid'); if(!grid) return; grid.innerHTML=''; const list=sets.filter(s=>s.lang===state.learnLang); if(!list.length){ grid.innerHTML = '<div class="card"><div class="title">–ü–æ–∫–∞ –Ω–µ—Ç —Å–µ—Ç–æ–≤</div><div class="meta">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Å–µ—Ç</div></div>'; return;} grid.append(...list.map(makeSetCard)); }

    // ===== Create set (manual) ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
    const langOptions = [
      {value:'en',label:'English'},{value:'ru',label:'–†—É—Å—Å–∫–∏–π'},{value:'es',label:'Espa√±ol'},{value:'fr',label:'Fran√ßais'},
      {value:'de',label:'Deutsch'},{value:'it',label:'Italiano'},{value:'ar',label:'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'},{value:'ja',label:'Êó•Êú¨Ë™û'},{value:'zh',label:'‰∏≠Êñá'}
    ];
    const suggestLex = { es:['hola','gracias','por favor','adi√≥s'], en:['hello','thanks','please','goodbye'], ru:['–ø—Ä–∏–≤–µ—Ç','—Å–ø–∞—Å–∏–±–æ','–ø–æ–∂–∞–ª—É–π—Å—Ç–∞'], de:['hallo','danke','bitte'], fr:['bonjour','merci','s‚Äôil vous pla√Æt'] };
    const tinyDict = { 'hola':{ru:'–ø—Ä–∏–≤–µ—Ç',en:'hello',de:'hallo',fr:'bonjour'}, 'hello':{ru:'–ø—Ä–∏–≤–µ—Ç',es:'hola',de:'hallo',fr:'bonjour'}, 'gracias':{ru:'—Å–ø–∞—Å–∏–±–æ',en:'thank you'} };

    function makeLangSelect(value){ const s=el('select','select-input'); s.innerHTML=langOptions.map(o=>`<option value="${o.value}">${o.label}</option>`).join(''); s.value=value; return s; }

    function addRow(pref={}){
      const row = el('div'); row.className='row card-row'; row.style.alignItems='end';
      const fWord = el('div','field'); fWord.innerHTML = `<label>–°–ª–æ–≤–æ</label>`; const inWord = el('input','input'); inWord.placeholder='Hola / Hello'; inWord.autocomplete='off'; inWord.setAttribute('list',''); fWord.appendChild(inWord);
      const fWLang = el('div','field'); fWLang.innerHTML = `<label>–Ø–∑—ã–∫ —Å–ª–æ–≤–∞</label>`; const selWL = makeLangSelect(pref.wl || state.learnLang); fWLang.appendChild(selWL);
      const fTrans = el('div','field'); fTrans.innerHTML = `<label>–ü–µ—Ä–µ–≤–æ–¥</label>`; const inTrans = el('input','input'); inTrans.placeholder='–ü—Ä–∏–≤–µ—Ç / –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ'; inTrans.autocomplete='off'; fTrans.appendChild(inTrans);
      const fTLang = el('div','field'); fTLang.innerHTML = `<label>–Ø–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞</label>`; const selTL = makeLangSelect(pref.tl || (state.uiLang||'ru')); fTLang.appendChild(selTL);
      const fActions = el('div','field'); const btnDel = el('button','btn ghost'); btnDel.type='button'; btnDel.textContent='–£–¥–∞–ª–∏—Ç—å'; fActions.appendChild(btnDel);

      row.append(fWord,fWLang,fTrans,fTLang,fActions);
      $('#cardRows').appendChild(row);

      // —Å–æ–±—ã—Ç–∏—è —Å—Ç—Ä–æ–∫–∏
      inWord.addEventListener('input',()=>{ // –ø—Ä–æ—Å—Ç–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
        const cand = tinyDict[inWord.value?.toLowerCase?.()]?.[selTL.value]; if(cand) inTrans.value = cand;
      });
      selTL.addEventListener('change',()=>{ const cand = tinyDict[inWord.value?.toLowerCase?.()]?.[selTL.value]; if(cand) inTrans.value = cand; });
      btnDel.addEventListener('click',()=>{ row.remove(); renderPreview(); });
    }

    function gatherRows(){
      const rows = $$('#cardRows .card-row');
      const cards = [];
      rows.forEach(r=>{
        const [inWord, selWL, inTrans, selTL] = [r.querySelector('input'), r.querySelectorAll('select')[0], r.querySelectorAll('input')[1], r.querySelectorAll('select')[1]];
        const word=(inWord?.value||'').trim(); const trans=(inTrans?.value||'').trim(); if(word && trans){ cards.push({front:word, back:trans, wl:selWL.value, tl:selTL.value}); }
      });
      return cards;
    }

    function renderPreview(){
      const grid = $('#newCardsPreview'); if(!grid) return; grid.innerHTML='';
      const cards = gatherRows();
      if(!cards.length){ grid.innerHTML = '<div class="card"><div class="meta">–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É</div></div>'; return; }
      cards.forEach(c=>{ const item=el('div','card'); item.innerHTML = `<div class="title">${c.front} ‚Äî ${c.back}</div><div class="meta">${c.wl.toUpperCase()} ‚Üí ${c.tl.toUpperCase()}</div>`; grid.appendChild(item); });
    }

    function saveSet(){
      const name = ($('#setName')?.value||'').trim()||'Untitled';
      const cards = gatherRows();
      if(!cards.length) return alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É');
      const id = 's'+Math.random().toString(36).slice(2,7);
      const wl = cards[0].wl; // –±–µ—Ä–µ–º —è–∑—ã–∫ –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–∫ —è–∑—ã–∫ —Å–µ—Ç–∞
      sets.unshift({id,title:name,lang:wl,total:cards.length,learned:0,due:cards.length});
      alert('–°–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: '+name);
      show('#setsPage'); renderSets();
    }

    // ===== Navigation (delegated, null-safe)
    document.body.addEventListener('click',(e)=>{
      const t=e.target;
      if(t.closest && t.closest('#homeBtn')){ show('#dashboard'); return; }
      if(t.matches?.('[data-nav="courses"]')){ renderCourses(); show('#coursesPage'); return; }
      if(t.matches?.('[data-nav="sets"]')){ renderSets(); show('#setsPage'); return; }
      if(t.hasAttribute?.('data-back')){ show('#dashboard'); return; }
      if(t.matches?.('[data-open="create-manual"]')){ $('#cardRows').innerHTML=''; addRow(); renderPreview(); show('#createSetPage'); return; }
      if(t.matches?.('[data-open="create-ai"]')){ show('#aiSetPage'); return; }
      if(t.id==='btnAIToManual'){ $('#cardRows').innerHTML=''; addRow(); renderPreview(); show('#createSetPage'); return; }
      if(t.id==='btnGenerateAI'){ alert('–î–µ–º–æ: –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ò–ò-–ø–∞—Ä—Å–µ—Ä —Ç–µ–∫—Å—Ç–∞'); return; }
      if(t.id==='btnAddRow'){ addRow(); renderPreview(); return; }
      if(t.id==='btnCancelCreate'){ show('#setsPage'); return; }
    });

    // form submit
    $('#createSetForm')?.addEventListener('submit', (e)=>{ e.preventDefault(); saveSet(); });

    // live preview
    $('#cardRows')?.addEventListener('input', ()=>{ renderPreview(); });

    // language selects initial
    $('#uiLang')?.addEventListener('change', (e)=>{ state.uiLang = e.target.value; localStorage.setItem('uiLang', state.uiLang); /* –º–µ—Å—Ç–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ i18n */ });
    $('#learnLang')?.addEventListener('change', (e)=>{ state.learnLang = e.target.value; localStorage.setItem('learnLang', state.learnLang); renderDashboard(); });

    // first paint
    renderDashboard();
    show('#dashboard');
  });
  </script>
</body>
</html>
